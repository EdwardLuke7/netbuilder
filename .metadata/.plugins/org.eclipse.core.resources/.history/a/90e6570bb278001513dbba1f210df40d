import java.util.ArrayList;
import java.util.Scanner;

public class WOTS {
	public static void main(String[] args) {		
		//ResultSet results = JDBCDatabaseManager.query("SELECT * FROM customer_orders");
		//JDBCDatabaseManager.update("INSERT INTO customer_orders (status, checked_out) VALUES (1, 1)");
		Scanner input = new Scanner(System.in);
		System.out.println("WELCOME TO WOTS");
		System.out.println("Initialising...");
		
		DAOFactory DAOFactory = new DAOFactory();
		CustomerOrderDAO cODAO = DAOFactory.getCODAO("mysql"); 
		OrderLineDAO oLDAO = DAOFactory.getOLDAO("mysql");
		
		System.out.println("\nMain Menu\nSelect an option:");
		System.out.println("1. List customer orders");
		
		switch (input.next().charAt(0)) {
			case '1':
				ArrayList<CustomerOrder> customerOrders = new ArrayList<CustomerOrder>();
				customerOrders = cODAO.fetchAll();
				
				System.out.println("Listing customer orders...");
				System.out.println("\n" + "ID\tSTATUS\tCHECKOUT");
				
				for (CustomerOrder order : customerOrders) {
					System.out.println(order);
				}
				
				System.out.println("Choose an order: ");
				int orderNum = input.nextInt();
				
				CustomerOrder currentOrder = cODAO.fetch(orderNum);
				
				currentOrder.setOrderLines(oLDAO.fetchOrderLines(currentOrder));
				//System.out.println(currentOrder.getOrderLines());
				
				ArrayList<OrderLine> orderLines = currentOrder.getOrderLines();
				
				System.out.println("\nOrder " + currentOrder.getID() + ":\n" + "Status:" + "PRODUCT\tQUANTITY");
				for (OrderLine line : orderLines) {
					System.out.println(line);
				}
				
				break;
			default:
				System.out.println("Exiting...");
				System.exit(0);
				break;
		}
		
	}
	
	public static void listCustomerOrders(CustomerOrderDAO dao) {
		
	}
}